<!doctype html>
<html lang="uk">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>–ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä –≤–∏–ø–∞–¥–∫–æ–≤–∏—Ö –∑–æ–±—Ä–∞–∂–µ–Ω—å ‚Äî picsum.photos</title>
  <style>
    :root{
      --bg:#0b0f14; --panel:#121923; --muted:#8aa0b7; --text:#e8eef5; --accent:#4fa3ff; --accent-2:#7bd389; --danger:#ff6b6b;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{margin:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Inter,Arial,sans-serif;background:linear-gradient(180deg,#0b0f14,#0e1420 40%,#0b0f14);color:var(--text);}
    .wrap{max-width:1000px;margin:0 auto;padding:24px}
    .title{font-size:clamp(20px,3.5vw,32px);font-weight:800;letter-spacing:.2px;display:flex;align-items:center;gap:.6rem;}
    .title small{font-weight:600;font-size:.9rem;color:var(--muted)}
    .card{background:rgba(18,25,35,.7);backdrop-filter:blur(6px);border:1px solid #1c2a3a;border-radius:18px;box-shadow:0 10px 30px rgba(0,0,0,.35);padding:16px}
    .controls{display:grid;grid-template-columns:repeat(6,minmax(0,1fr));gap:12px}
    .controls .col-span-2{grid-column:span 2}
    .controls .col-span-3{grid-column:span 3}
    .controls label{display:block;font-size:.85rem;color:var(--muted);margin-bottom:6px}
    .controls input[type="number"], .controls input[type="text"], .controls select{
      width:100%;padding:10px 12px;border-radius:12px;border:1px solid #253445;background:#0f1722;color:var(--text);outline:none
    }
    .controls .row{display:flex;gap:10px;align-items:center}
    .btns{display:flex;flex-wrap:wrap;gap:10px;margin-top:6px}
    button, .ghost{
      border:none;border-radius:14px;padding:10px 14px;font-weight:700;letter-spacing:.2px;cursor:pointer;
      background:linear-gradient(180deg,#2b6cb0,#2a4365);color:#fff;border:1px solid #284468
    }
    button:hover{filter:brightness(1.06)}
    .ghost{background:transparent;border:1px dashed #34506e;color:var(--muted)}
    .success{background:linear-gradient(180deg,#2f855a,#22543d);border-color:#276749}
    .danger{background:linear-gradient(180deg,#c53030,#822727);border-color:#9b2c2c}
    .gallery{margin-top:16px;display:grid;grid-template-columns:1fr;gap:16px}
    .viewer{position:relative;overflow:hidden;border-radius:18px;border:1px solid #1c2a3a;background:#0f1722;min-height:280px;display:grid;place-items:center}
    .viewer img{display:block;max-width:100%;max-height:70vh;width:auto;height:auto;object-fit:contain;transition:opacity .25s ease}
    .spinner{display:none}
    .viewer.loading .spinner{display:block}
    .viewer.loading img{opacity:.2}
    .status{font-size:.9rem;color:var(--muted)}
    .thumbs{display:grid;grid-template-columns:repeat(auto-fill,minmax(110px,1fr));gap:10px}
    .thumbs a{border:1px solid #203049;border-radius:10px;overflow:hidden;display:block}
    .thumbs img{display:block;width:100%;height:80px;object-fit:cover}
    .linkbar{display:flex;gap:10px;flex-wrap:wrap}
    .note{color:var(--muted);font-size:.85rem}
    .slideshow-controls{margin-top:16px;padding:12px;border:1px solid #1c2a3a;border-radius:12px;background:#101720}
    .slideshow{position:fixed;inset:0;background:#000;display:none;align-items:center;justify-content:center;z-index:1000}
    .slideshow img{max-width:90%;max-height:90%;object-fit:contain;animation:fade 1s ease}
    @keyframes fade{from{opacity:0}to{opacity:1}}
  </style>
</head>
<body>
  <div class="wrap">
    <div class="title">üñºÔ∏è –ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä –≤–∏–ø–∞–¥–∫–æ–≤–∏—Ö –∑–æ–±—Ä–∞–∂–µ–Ω—å <small>–Ω–∞ –±–∞–∑—ñ <code>picsum.photos</code></small></div>

    <div class="card" role="region" aria-label="–ü–∞–Ω–µ–ª—å –∫–µ—Ä—É–≤–∞–Ω–Ω—è">
      <div class="controls">
        <div>
          <label for="w">–®–∏—Ä–∏–Ω–∞ (px)</label>
          <input id="w" type="number" min="16" max="5000" value="800" />
        </div>
        <div>
          <label for="h">–í–∏—Å–æ—Ç–∞ (px)</label>
          <input id="h" type="number" min="16" max="5000" value="500" />
        </div>
        <div>
          <label for="seed">Seed (–Ω–µ–æ–±–æ–≤'—è–∑–∫–æ–≤–æ)</label>
          <input id="seed" type="text" placeholder="–ù–∞–ø—Ä.: cat-42" />
        </div>
        <div>
          <label for="blur">–†–æ–∑–º–∏—Ç—Ç—è</label>
          <select id="blur">
            <option value="0">–Ω–µ–º–∞—î</option>
            <option value="1">–ª–µ–≥–∫–µ</option>
            <option value="2">—Å–∏–ª—å–Ω—ñ—à–µ</option>
            <option value="3">—Å–∏–ª—å–Ω–µ</option>
            <option value="4">–¥—É–∂–µ —Å–∏–ª—å–Ω–µ</option>
            <option value="5">–º–∞–∫—Å–∏–º—É–º</option>
          </select>
        </div>
        <div class="row col-span-2" style="margin-top:22px">
          <label class="row" style="gap:6px"><input id="gray" type="checkbox"/> —á/–± (grayscale)</label>
          <label class="row" style="gap:6px"><input id="square" type="checkbox"/> –∫–≤–∞–¥—Ä–∞—Ç 1:1</label>
        </div>
      </div>
      <div class="btns">
        <button id="btnGen">üé≤ –ù–æ–≤–∞ –≤–∏–ø–∞–¥–∫–æ–≤–∞</button>
        <button id="btnSameSeed" class="ghost" title="–ó–≥–µ–Ω–µ—Ä—É–≤–∞—Ç–∏ —â–µ —Ä–∞–∑ —ñ–∑ —Ç–∏–º —Å–∞–º–∏–º seed">‚ôªÔ∏è –ü–µ—Ä–µ–≥–µ–Ω–µ—Ä—É–≤–∞—Ç–∏</button>
        <button id="btnCopy" class="success">üîó –ö–æ–ø—ñ—é–≤–∞—Ç–∏ URL</button>
        <a id="btnOpen" class="ghost" target="_blank" rel="noopener">‚ÜóÔ∏è –í—ñ–¥–∫—Ä–∏—Ç–∏ —É –≤–∫–ª–∞–¥—Ü—ñ</a>
        <a id="btnDownload" class="ghost" download>‚¨áÔ∏è –ó–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏</a>
        <button id="btnClear" class="danger">üßπ –û—á–∏—Å—Ç–∏—Ç–∏ –º—ñ–Ω—ñ–∞—Ç—é—Ä–∏</button>
      </div>
      <p class="note">–ü–æ—Ä–∞–¥–∞: —è–∫—â–æ –ø–æ–ª–µ <em>Seed</em> –ø–æ—Ä–æ–∂–Ω—î, –∫–æ–∂–µ–Ω –∫–ª—ñ–∫ –¥–∞—î –Ω–æ–≤—É –∫–∞—Ä—Ç–∏–Ω–∫—É (–¥–æ–¥–∞—î–º–æ –∞–Ω—Ç–∏-–∫–µ—à –ø–∞—Ä–∞–º–µ—Ç—Ä). –Ø–∫—â–æ –≤–≤–µ—Å—Ç–∏ Seed ‚Äî –æ—Ç—Ä–∏–º–∞—î—Ç–µ —Å—Ç–∞–±—ñ–ª—å–Ω–µ –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è –¥–ª—è —Ü–∏—Ö —Ä–æ–∑–º—ñ—Ä—ñ–≤.</p>
    </div>

    <div class="slideshow-controls card">
      <h3>üé¨ –°—Ç–≤–æ—Ä–∏—Ç–∏ —Å–ª–∞–π–¥—à–æ—É</h3>
      <label>–ö—ñ–ª—å–∫—ñ—Å—Ç—å –∫–∞—Ä—Ç–∏–Ω–æ–∫: <input id="slideCount" type="number" value="5" min="1" max="50"></label>
      <label>–Ü–Ω—Ç–µ—Ä–≤–∞–ª (—Å–µ–∫): <input id="slideInterval" type="number" value="3" min="1" max="20"></label>
      <div class="btns">
        <button id="btnCreateSlideshow">üì• –°—Ç–≤–æ—Ä–∏—Ç–∏ —Å–ª–∞–π–¥—à–æ—É</button>
        <button id="btnStartSlideshow" disabled>‚ñ∂Ô∏è –î–∏–≤–∏—Ç–∏—Å—å —Å–ª–∞–π–¥—à–æ—É</button>
      </div>
      <p id="slideshowStatus" class="note"></p>
    </div>

    <div class="gallery">
      <div id="viewer" class="viewer">
        <div class="spinner">‚è≥ –ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è‚Ä¶</div>
        <img id="img" alt="–í–∏–ø–∞–¥–∫–æ–≤–µ –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è –∑ picsum.photos" />
      </div>
      <div class="linkbar">
        <span class="status" id="status">URL –Ω–µ –∑–≥–µ–Ω–µ—Ä–æ–≤–∞–Ω–æ</span>
      </div>
      <div class="thumbs" id="thumbs" aria-label="–Ü—Å—Ç–æ—Ä—ñ—è –º—ñ–Ω—ñ–∞—Ç—é—Ä"></div>
    </div>
  </div>

  <div class="slideshow" id="slideshow">
    <img id="slideImg" alt="–°–ª–∞–π–¥—à–æ—É">
  </div>

  <script>
    const $ = (sel)=>document.querySelector(sel);
    const w = $('#w');
    const h = $('#h');
    const seed = $('#seed');
    const blur = $('#blur');
    const gray = $('#gray');
    const square = $('#square');

    const btnGen = $('#btnGen');
    const btnSameSeed = $('#btnSameSeed');
    const btnCopy = $('#btnCopy');
    const btnOpen = $('#btnOpen');
    const btnDownload = $('#btnDownload');
    const btnClear = $('#btnClear');

    const viewer = $('#viewer');
    const img = $('#img');
    const thumbs = $('#thumbs');
    const status = $('#status');

    const btnCreateSlideshow = $('#btnCreateSlideshow');
    const btnStartSlideshow = $('#btnStartSlideshow');
    const slideCount = $('#slideCount');
    const slideInterval = $('#slideInterval');
    const slideshowStatus = $('#slideshowStatus');
    const slideshow = $('#slideshow');
    const slideImg = $('#slideImg');

    let slideshowUrls = [];

    function buildUrl(opts){
      const W = Math.max(16, Math.min(5000, +opts.w || 800));
      const H = Math.max(16, Math.min(5000, +opts.h || 600));
      const blurLvl = Math.max(0, Math.min(10, +opts.blur || 0));
      const grayscale = !!opts.gray;
      const seedVal = (opts.seed||'').trim();

      let path;
      if(seedVal){
        path = `https://picsum.photos/seed/${encodeURIComponent(seedVal)}/${W}/${H}`;
      } else {
        path = `https://picsum.photos/${W}/${H}`;
      }
      const q = new URLSearchParams();
      if (grayscale) q.set('grayscale','');
      if (blurLvl>0) q.set('blur', String(blurLvl));
      if (!seedVal) q.set('random', String(Date.now()+Math.random()));
      return path + (q.toString()?`?${q.toString()}`:'');
    }

    async function preloadImages(urls){
      let loaded = 0;
      return Promise.all(urls.map(url => new Promise((resolve)=>{
        const img = new Image();
        img.onload = ()=>{loaded++; slideshowStatus.textContent=`–ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–æ ${loaded}/${urls.length}`; resolve(url)};
        img.onerror = ()=>resolve(url);
        img.src = url;
      })));
    }

    btnCreateSlideshow.addEventListener('click', async ()=>{
      const count = Math.min(50, Math.max(1, +slideCount.value||5));
      slideshowStatus.textContent = '‚è≥ –ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –∫–∞—Ä—Ç–∏–Ω–æ–∫...';
      btnCreateSlideshow.disabled = true;
      const urls = [];
      for(let i=0;i<count;i++){
        urls.push(buildUrl({
          w: w.value,
          h: h.value,
          seed: '',
          blur: blur.value,
          gray: gray.checked
        }));
      }
      slideshowUrls = await preloadImages(urls);
      slideshowStatus.textContent = '‚úÖ –°–ª–∞–π–¥—à–æ—É –≥–æ—Ç–æ–≤–µ!';
      btnStartSlideshow.disabled = false;
      btnCreateSlideshow.disabled = false;
    });

    btnStartSlideshow.addEventListener('click', ()=>{
      if(slideshowUrls.length===0) return;
      let idx = 0;
      const interval = Math.max(1, +slideInterval.value||3)*1000;
      slideshow.style.display='flex';
      function showNext(){
        slideImg.style.opacity=0;
        setTimeout(()=>{
          slideImg.src = slideshowUrls[idx];
          slideImg.onload = ()=>{slideImg.style.opacity=1};
        },300);
        idx = (idx+1)%slideshowUrls.length;
      }
      showNext();
      const timer = setInterval(showNext, interval);
      slideshow.onclick = ()=>{
        clearInterval(timer);
        slideshow.style.display='none';
      };
    });

    function addThumb(url){
      const a = document.createElement('a');
      a.href = url; a.target = '_blank'; a.rel='noopener';
      const t = document.createElement('img');
      t.src = url; t.alt = '–º—ñ–Ω—ñ–∞—Ç—é—Ä–∞';
      a.appendChild(t);
      thumbs.prepend(a);
      const items = [...thumbs.children];
      if(items.length>30){ items.slice(30).forEach(n=>n.remove()); }
    }

    function generate(randomizeSeed=false){
      if(randomizeSeed){
        seed.value = '';
      }
      const url = buildUrl({
        w: w.value,
        h: h.value,
        seed: seed.value,
        blur: blur.value,
        gray: gray.checked
      });
      loadImage(url);
    }

    async function loadImage(url){
      viewer.classList.add('loading');
      status.textContent = url;
      btnOpen.href = url;
      btnDownload.href = url;
      try{
        await new Promise((res,rej)=>{
          img.onload = ()=>res();
          img.onerror = (e)=>rej(e);
          img.src = url;
        });
        addThumb(url);
      }catch(e){
        alert('–ù–µ –≤–¥–∞–ª–æ—Å—è –∑–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏ –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è. –°–ø—Ä–æ–±—É–π—Ç–µ —ñ–Ω—à—ñ –ø–∞—Ä–∞–º–µ—Ç—Ä–∏.');
        console.error(e);
      }finally{
        viewer.classList.remove('loading');
      }
    }

    btnGen.addEventListener('click', ()=> generate(true));
    btnSameSeed.addEventListener('click', ()=> generate(false));
    btnCopy.addEventListener('click', async ()=>{
      const url = img.src || status.textContent;
      try{
        await navigator.clipboard.writeText(url);
        btnCopy.textContent = '‚úì –°–∫–æ–ø—ñ–π–æ–≤–∞–Ω–æ';
        setTimeout(()=>btnCopy.textContent='üîó –ö–æ–ø—ñ—é–≤–∞—Ç–∏ URL', 1200);
      }catch{ alert('–ù–µ –≤–¥–∞–ª–æ—Å—è —Å–∫–æ–ø—ñ—é–≤–∞—Ç–∏.'); }
    });
    btnClear.addEventListener('click', ()=>{ thumbs.innerHTML=''; });

    generate(true);
  </script>
</body>
</html>

